# Ralph

```txt
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£§‚£∂‚°∂‚¢õ‚†ü‚°ø‚†ª‚¢ª‚¢ø‚¢∂‚¢¶‚£Ñ‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚°æ‚°´‚¢ä‚†å‚°ê‚¢°‚†ä‚¢∞‚†Å‚°é‚†ò‚°Ñ‚¢¢‚†ô‚°õ‚°∑‚¢§‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚¢†‚¢™‚¢ã‚°û‚¢†‚†É‚°ú‚†Ä‚†é‚†Ä‚†â‚†Ä‚†É‚†Ä‚†É‚†Ä‚†É‚†ô‚†ò‚†ä‚¢ª‚†¶‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚¢á‚°á‚°ú‚†Ä‚†ú‚†Ä‚†Å‚†Ä‚¢Ä‚†î‚†â‚†â‚†ë‚†Ñ‚†Ä‚†Ä‚°∞‚†ä‚†â‚†ë‚°Ñ‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚°∏‚†ß‚†Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚°Ä‚†æ‚†Ä‚†Ä‚£∏‚†Ä‚†Ä‚¢ß‚†Ä‚†õ‚†Ä‚†å‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†ò‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†í‚†í‚†ö‚†Å‚†à‚†â‚†≤‚°ç‚†í‚†à‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†à‚†≤‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†ñ‚†â‚°π‚†§‚†∂‚†Å‚†Ä‚†Ä‚†Ä‚†à‚¢¶‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ß‚£¥‚†Å‚†Ä‚†ò‚†ì‚¢≤‚£Ñ‚£Ä‚£Ä‚£Ä‚°§‚†î‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚†Ä‚£ú‚†Ä‚†à‚†ì‚†¶‚¢Ñ‚£Ä‚£Ä‚£∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Å‚¢à‚¢á‚£º‚°Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚¢†‚†í‚†õ‚†≤‚£Ñ‚†Ä‚†Ä‚†Ä‚£†‚†è‚†Ä‚†â‚†≤‚£§‚†Ä‚¢∏‚†ã‚¢ª‚£§‚°õ‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚¢°‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚¢≤‚†æ‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢≥‚°æ‚£§‚†ü‚†Å‚†π‚£ø‚¢Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚¢Ä‚†º‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£º‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚£ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚°è‚†Ä‚†ò‚¢¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚£ß‚†Ä‚†Ä‚†Ä‚†Ä
‚¢∞‚£Ñ‚†Ä‚†Ä‚†Ä‚†â‚†≥‚†¶‚£§‚£§‚°§‚†¥‚†ñ‚†ã‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ø‚£Ü‚†Ä‚†Ä‚†Ä
‚¢∏‚£â‚†â‚†ì‚†≤‚¢¶‚£§‚£Ñ‚£Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚£Ä‚£†‚£º‚¢π‚°Ñ‚†Ä‚†Ä
‚†ò‚°ç‚†ô‚†í‚†∂‚¢§‚£Ñ‚£à‚£â‚°â‚†â‚†â‚†õ‚†õ‚†õ‚†õ‚†õ‚†õ‚¢ª‚†â‚†â‚†â‚¢ô‚£è‚£Å‚£∏‚†á‚°á‚†Ä‚†Ä
‚†Ä‚¢£‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†â‚â†‚†ô‚†õ‚†õ‚†õ‚†õ‚†õ‚†õ‚†õ‚†í‚†í‚†í‚†ã‚†â‚†Ä‚†∏‚†ö‚¢á‚†Ä‚†Ä
‚†Ä‚†Ä‚¢ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚†á‚¢§‚£®‚†á‚†Ä
‚†Ä‚†Ä‚†Ä‚¢ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£§‚¢ª‚°Ä‚£∏‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚†õ‚†â‚†Å‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚¢Ñ‚£Ä‚£§‚†§‚†¥‚†í‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚†Ä‚°é‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∑‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä
‚†Ä‚†Ä‚¢Ä‚°∑‚¢§‚£§‚£Ä‚£Ä‚£Ä‚£Ä‚£†‚†§‚†æ‚£§‚£Ä‚°ò‚†õ‚†∂‚†∂‚†∂‚†∂‚†ñ‚†í‚†ã‚†ô‚†ì‚†≤‚¢§‚£Ä‚†Ä
‚†Ä‚†Ä‚†ò‚†ß‚£Ä‚°Ä‚†à‚†â‚†â‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ô‚†≥‚£§‚£Ñ‚£Ä‚£Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£à‚°á
‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†õ‚†≤‚†§‚†§‚¢§‚£§‚£Ñ‚£Ä‚£Ä‚£Ä‚£Ä‚°∏‚†á‚†Ä‚†Ä‚†Ä‚†â‚†â‚†â‚†â‚†â‚†â‚†Å‚†Ä
```

Iterative AI Development Loop Tool

Ralph implements the "Ralph Wiggum" technique for self-referential AI development loops using GitHub Copilot. It
continuously feeds prompts to AI, monitoring for completion signals, with each iteration building on previous work until
the task is done.

This is a C# port of the original [copilot-ralph](https://github.com/JanDeDobbeleer/copilot-ralph) by Jan De Dobbeleer.

> [!IMPORTANT]
> While Ralph works, it's highly experimental. Feel free to use it or as inspiration on how to integrate with AI
> development loops.

## Features

‚ú® **Iterative AI Loops** - Run multiple AI iterations until task completion
‚öôÔ∏è **Flexible Configuration** - Configure loops via command-line flags
ü§ñ **GitHub Copilot Integration** - Powered by GitHub Copilot SDK
üì° **Real-time Event Streaming** - Watch iteration progress and tool execution
üõ†Ô∏è **Tool Execution** - AI can read files, run commands, and make changes
‚è±Ô∏è **Timeout Controls** - Prevent runaway loops with safety limits

## Quick Start

### Prerequisites

- .NET 10.0 or later
- GitHub Copilot access
- Git

### Installation

Ralph is distributed as a .NET tool via Feedz.io.

```powershell
# Install Ralph globally
dotnet tool install --global Ralph.Cli `
  --add-source "https://f.feedz.io/matt-kotsenas/ralph-copilot/nuget/index.json" `
  --prerelease
```

### Local Development Installation

During development, you can install from a local build:

```powershell
# Clone and build
git clone https://github.com/mattkotsenas/copilot-ralph.git
cd copilot-ralph

# Build and pack in Release mode
dotnet pack src/Ralph.Cli -c Release

# Install as a global tool from the local package
dotnet tool install --global Ralph.Cli `
  --add-source ./artifacts/package/release `
  --prerelease
```

After installation, the `ralph` command will be available globally.

### Upgrading

```powershell
# From GitHub Packages
dotnet tool update --global Ralph.Cli --prerelease

# Or from local build during development
dotnet pack src/Ralph.Cli -c Release
dotnet tool update --global Ralph.Cli `
  --add-source ./artifacts/package/release `
  --prerelease
```

### Uninstalling

```powershell
dotnet tool uninstall --global Ralph.Cli
```

### Running from Source

You can also run directly from source without installing:

```powershell
dotnet run --project src/Ralph.Cli -- run "Your task here"
```

### Usage

```bash
# Run an AI development loop
ralph run "Add unit tests for the parser module"

# Use a Markdown file as the prompt
ralph run task_description.md

# With options
ralph run --max-iterations 5 --timeout 10m "Refactor authentication"

# Custom model and settings
ralph run \
  --model gpt-4-turbo \
  --promise "Task complete!" \
  --streaming=true \
  "Implement user authentication"
```

## How It Works

1. **Initialize** - Ralph parses your prompt and configuration (max iterations, timeout)
2. **Setup** - Create SDK client and loop engine with system prompt
3. **Listen** - Start event listener to display progress in real-time
4. **Loop** - For each iteration:
   - Send prompt to Copilot AI
   - Stream AI response to stdout
   - Execute any tools the AI invokes (read files, run commands, etc.)
5. **Complete** - Loop exits when:
   - Max iterations reached ‚úì Complete
   - Timeout exceeded ‚úó Timeout
   - Error occurs ‚úó Failed
   - User cancels (Ctrl+C) ‚úó Cancelled
6. **Summary** - Display final status, iteration count, and duration

## Commands

### `ralph run`

Run an AI development loop.

```bash
# Direct prompt
ralph run "Add comprehensive error handling"

# Using a Markdown file as prompt
ralph run task_description.md

# With flags
ralph run \
  --max-iterations 20 \
  --timeout 1h \
  --model gpt-4-turbo \
  --log-level debug \
  "Implement user authentication"

# Dry run (show what would happen)
ralph run --dry-run "Refactor database layer"

# With custom system message
ralph run \
  --system-prompt "You are an expert C# developer" \
  --system-prompt-mode replace \
  "Optimize the code"
```

Available flags:

- `--max-iterations, -m` - Maximum loop iterations (default: 10)
- `--timeout, -t` - Maximum loop runtime (default: 30m)
- `--promise` - Completion promise phrase (default: "I'm special!")
- `--model` - AI model to use (default: gpt-4)
- `--working-dir` - Working directory (default: current)
- `--log-level` - Log level: debug, info, warn, error (default: info)
- `--streaming` - Enable streaming responses (default: true)
- `--system-prompt` - Custom system message
- `--system-prompt-mode` - append or replace (default: append)
- `--dry-run` - Show configuration without running

### `ralph version`

Show version information.

```bash
ralph version
ralph version --short
```

### `ralph completion`

Generate shell completion scripts for tab completion support.

```powershell
# PowerShell - add to $PROFILE
ralph completion pwsh | Out-String | Invoke-Expression
```

```bash
# Bash - add to ~/.bashrc
eval "$(ralph completion bash)"
```

```bash
# Zsh - add to ~/.zshrc
eval "$(ralph completion zsh)"
```

```bash
# Fish - add to ~/.config/fish/config.fish
ralph completion fish | source
```

## Configuration

Ralph is configured entirely through command-line flags with sensible defaults. All settings can be customized per run:

- `--max-iterations 10` - Maximum iterations before stopping
- `--timeout 30m` - Maximum runtime
- `--model gpt-4` - AI model to use
- `--promise "I'm special!"` - Completion phrase
- `--log-level info` - Logging verbosity
- `--streaming true` - Enable streaming responses

Run `ralph run --help` for all available options.

## Development

### Building

```powershell
# Restore dependencies
dotnet restore

# Build
dotnet build

# Run tests
dotnet test

# Run the CLI directly
dotnet run --project src/Ralph.Cli -- version

# Build and pack for distribution
dotnet pack src/Ralph.Cli -c Release
# Output: artifacts/package/release/Ralph.Cli.{version}.nupkg
```

## Contributing

Contributions are welcome! Please:

1. Ensure tests pass with `dotnet test`
2. Follow existing code style
3. Submit a pull request with clear description

## License

MIT License - see [LICENSE](./LICENSE) for details

## Acknowledgments

- Original Implementation [copilot-ralph](https://github.com/JanDeDobbeleer/copilot-ralph) by [Jan De Dobbeleer](https://github.com/JanDeDobbeleer)
- Inspired by the [Ralph Wiggum plugin](https://github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum) for Claude
- Built with [GitHub Copilot SDK](https://github.com/github/copilot-sdk)
- Console UI powered by [Spectre.Console](https://spectreconsole.net/)
